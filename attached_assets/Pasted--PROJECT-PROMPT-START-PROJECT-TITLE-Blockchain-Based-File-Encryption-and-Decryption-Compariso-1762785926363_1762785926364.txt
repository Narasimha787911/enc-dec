üì¶ PROJECT PROMPT START

PROJECT TITLE:
Blockchain-Based File Encryption and Decryption Comparison Tool  
(Using AES-256-GCM, Blowfish-256-EAX, and ChaCha20-Poly1305)

üéØ PURPOSE:
Build a Python Flask web application that encrypts and decrypts FILES (not text)
using three symmetric algorithms: AES-256-GCM, Blowfish-256-EAX, and ChaCha20-Poly1305.
Each operation is recorded in a local blockchain ledger.
Include a benchmark feature with a dynamic comparison graph that automatically updates
based on the performance of encrypted and decrypted files (no separate uploads needed).

‚öôÔ∏è TECH REQUIREMENTS:
- Language: Python 3.11+
- Framework: Flask
- Libraries: pycryptodome, matplotlib, pandas
- Database: SQLite (ledger.db) or JSON (ledger.json)
- Frontend: HTML + Bootstrap
- Environment: Replit Free (single process, 10 agent limit, no external nodes)

üß∞ FEATURES:

### 1Ô∏è‚É£ ENCRYPTION & DECRYPTION WINDOW
- Upload any file ‚Üí choose algorithm ‚Üí enter passphrase.
- Derive 256-bit key using PBKDF2 (SHA-256 + random salt).
- Encrypt file ‚Üí embed all metadata (salt, nonce, tag, algorithm) inside encrypted file header.
- Store ciphertext in `/storage/encrypted/` and allow user to **download encrypted file**.
- For decryption, upload the same encrypted file ‚Üí the app extracts metadata from header.
- Enter passphrase ‚Üí decrypt ‚Üí verify integrity (tag/hash).
- Save decrypted file in `/storage/decrypted/` and allow user to **download it**.
- Automatically record **encryption/decryption time, file size, and algorithm** in blockchain ledger.
- Collected performance data is reused in the benchmark chart ‚Äî no separate upload step.

### 2Ô∏è‚É£ PERFORMANCE BENCHMARK WINDOW
- Automatically generates a **comparison chart** from encryption/decryption logs in the blockchain ledger.
- Compares AES-256-GCM, Blowfish-256-EAX, and ChaCha20-Poly1305 based on:
  - Encryption time (ms)
  - Decryption time (ms)
  - File size (KB)
- Dynamically rendered using Matplotlib (converted to base64 PNG for display).
- Chart updates automatically after every new encryption/decryption operation.
- Include a **‚ÄúClear Chart‚Äù** button to reset the benchmark view.

### 3Ô∏è‚É£ BLOCKCHAIN LEDGER WINDOW
- Append-only blockchain stored in `ledger.db` or `ledger.json`.
- Each block includes:
  {
    index, timestamp, prev_hash, tx_hash,
    algorithm, file_name, file_hash,
    ciphertext_path, nonce_b64, tag_b64,
    salt_b64, file_size_bytes,
    enc_time_ms, dec_time_ms
  }
- Implement `/verify` endpoint to validate blockchain integrity.
- Show the full ledger table in an interactive HTML table (sortable and filterable).

ü™ô BLOCKCHAIN STRUCTURE:
- prev_hash ensures immutability between blocks.
- tx_hash = SHA-256 hash of current block content.
- Blockchain holds **only metadata**, no keys or passphrases.

üìä COMPARISON METRICS TABLE:
| Algorithm | Enc Time (ms) | Dec Time (ms) | File Size (KB) |
|------------|---------------|---------------|----------------|

üìÅ PROJECT STRUCTURE:
app.py                 ‚Üí Flask backend  
crypto_utils.py        ‚Üí Encryption/Decryption logic  
blockchain.py          ‚Üí Blockchain management  
benchmark.py           ‚Üí Benchmark & chart generation  
templates/  
 ‚îú‚îÄ‚îÄ index.html         (Main: Encrypt/Decrypt)  
 ‚îú‚îÄ‚îÄ benchmark.html     (Performance page with auto chart)  
 ‚îî‚îÄ‚îÄ ledger.html        (Blockchain ledger)  
storage/encrypted/     ‚Üí Encrypted files  
storage/decrypted/     ‚Üí Decrypted files  
ledger.db or ledger.json  
requirements.txt  
README.md  

üì¶ REQUIRED PACKAGES:
flask  
pycryptodome  
matplotlib  
pandas  

‚ö° FUNCTIONAL NOTES:
- Works automatically from the same input file‚Äîno separate benchmark uploads.
- Benchmark chart builds from ledger records (time and size of encrypted/decrypted files).
- Passphrase required for key derivation only.
- All metadata (salt, nonce, tag, algorithm) stored inside encrypted file header.
- Blockchain records metadata and timing info only.
- ‚ÄúClear Chart‚Äù button resets visualization data (without deleting ledger).
- Fully functional under Replit Free limits.

‚úÖ ACCEPTANCE TESTS:
- Encrypt and download a test file ‚Üí re-upload ‚Üí decrypt successfully.
- Blockchain hash chain validates correctly.
- Benchmark graph auto-updates after encryption/decryption.
- ‚ÄúClear Chart‚Äù button resets chart data visually.
- No passphrases or keys stored anywhere.

üß† IMPLEMENTATION HINTS:
- AES: `AES.new(key, AES.MODE_GCM, nonce)`
- ChaCha20: `ChaCha20_Poly1305.new(key, nonce)`
- Blowfish: `Blowfish.new(key, Blowfish.MODE_EAX, nonce)`
- Key derivation: `PBKDF2(passphrase, salt, dkLen=32, count=200000)`
- File header embeds: algorithm_id | salt | nonce | tag | ciphertext
- Use `time.perf_counter()` for precise timing.
- Benchmark.py reads ledger data and auto-generates Matplotlib chart.
- Flask routes:  
  `/` ‚Üí Encrypt/Decrypt  
  `/benchmark` ‚Üí Auto Chart + Clear button  
  `/ledger` ‚Üí Blockchain table  
  `/verify` ‚Üí Integrity check

‚ö†Ô∏è SECURITY NOTE:
- Passphrase used temporarily for key derivation.
- Blockchain never stores passphrases or derived keys.
- Educational demonstration, not production security software.

üì¶ PROJECT PROMPT END
